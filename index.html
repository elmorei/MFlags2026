<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <title>FLAGS! Placeholder</title>
    <style>
      :root {
        color-scheme: dark;
      }

      * {
        box-sizing: border-box;
        user-select: none;
        -webkit-user-select: none;
      }

      html,
      body {
        width: 100%;
        height: 100%;
        margin: 0;
        overflow: hidden;
        background: #000;
      }

      #stage {
        position: fixed;
        inset: 0;
        background: #000;
        touch-action: manipulation;
      }

      #label {
        position: absolute;
        left: 0;
        top: 0;
        margin: 0;
        color: #ff4fa3;
        font-family: Impact, Haettenschweiler, "Arial Narrow Bold", sans-serif;
        font-size: clamp(2rem, 12vw, 8rem);
        line-height: 1;
        letter-spacing: 0.04em;
        text-shadow:
          0 0 8px rgba(255, 79, 163, 0.75),
          0 0 22px rgba(255, 79, 163, 0.45);
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <main id="stage" aria-label="FLAGS placeholder stage">
      <h1 id="label">FLAGS!</h1>
    </main>

    <script>
      (() => {
        const stage = document.getElementById("stage");
        const label = document.getElementById("label");

        let x = 32;
        let y = 32;
        let vx = 3.2;
        let vy = 2.4;

        const randomVelocity = () => {
          const speed = 2.2 + Math.random() * 2.8;
          const angle = Math.random() * Math.PI * 2;
          vx = Math.cos(angle) * speed;
          vy = Math.sin(angle) * speed;
        };

        let lastAccelAt = 0;
        const accelerateBounce = () => {
          const now = performance.now();
          if (now - lastAccelAt < 100) return;
          lastAccelAt = now;

          const accel = 1.22;
          const maxSpeed = 13;
          vx = Math.max(-maxSpeed, Math.min(maxSpeed, vx * accel));
          vy = Math.max(-maxSpeed, Math.min(maxSpeed, vy * accel));
        };

        const bounceWithinBounds = () => {
          const maxX = stage.clientWidth - label.offsetWidth;
          const maxY = stage.clientHeight - label.offsetHeight;

          if (x <= 0) {
            x = 0;
            vx = Math.abs(vx);
          } else if (x >= maxX) {
            x = maxX;
            vx = -Math.abs(vx);
          }

          if (y <= 0) {
            y = 0;
            vy = Math.abs(vy);
          } else if (y >= maxY) {
            y = maxY;
            vy = -Math.abs(vy);
          }
        };

        const draw = () => {
          label.style.transform = `translate(${x}px, ${y}px)`;
        };

        const tick = () => {
          x += vx;
          y += vy;
          bounceWithinBounds();
          draw();
          requestAnimationFrame(tick);
        };

        const keepInsideAfterResize = () => {
          const maxX = Math.max(0, stage.clientWidth - label.offsetWidth);
          const maxY = Math.max(0, stage.clientHeight - label.offsetHeight);
          x = Math.min(Math.max(0, x), maxX);
          y = Math.min(Math.max(0, y), maxY);
          draw();
        };

        label.addEventListener("click", accelerateBounce);
        label.addEventListener("pointerdown", accelerateBounce);
        window.addEventListener("resize", keepInsideAfterResize);

        randomVelocity();
        keepInsideAfterResize();
        requestAnimationFrame(tick);
      })();
    </script>
  </body>
</html>
